<?php// If it's going to need the database, then it's // probably smart to require it before we start.require_once(LIB_PATH.DS.'database.php');class Journals extends DatabaseObject {		protected static $table_name="journals";	protected static $db_fields = array('id', 'journal_code', 'title_abb',					'title', 'lang_code', 'lib_congress', 'trans_code', 					'comments', 'unca_flag', 'library_code', 'flag_code', 					'year_discontinued', 'old_code', 'new_code', 					'year_started', 'first_vol', 'last_vol', 'issn_code');		public $id;	public $journal_code;	public $title_abb;	public $title;	public $lang_code;	public $lib_congress;	public $trans_code;	public $comments;	public $unca_flag;	public $library_code;	public $flag_code;	public $year_discontinued;	public $old_code;	public $new_code;	public $year_started;	public $first_vol;	public $last_vol;	public $issn_code;	  public function full_name() {    if(isset($this->journal_code) ) {      return $this->journal_code . " " . $this->title_abb . " " . $this->lang_code . " " . 	  $this->title . " " . $this->issn_code;    } else {      return "";    }  }public static function journal_sql_where($journalcode, $title){						$sql = "";		if($journalcode !="") {$sql .=" AND journal_code= '{$journalcode}' "; }		if($title !="") {$sql .=" AND LOCATE('{$title}',title) ";}		$sql .= " ORDER BY journal_code ";	return $sql;	}	public static function legit_journ_code($code) {	global $database;	$sql = "SELECT COUNT(*) FROM journals WHERE journal_code = '{$code}'";	$result_set = $database->query($sql);	if(array_shift($database->fetch_array($result_set)) == 1) return true;  else return false;//	if(mysql_num_rows($result_set) != 0) return true;  else return false;//	$rows = array_shift($database->fetch_array($result_set));//	if(!empty($rows)) 	return true;  else return false;	}	public static function authenticate($journ_key="") {    global $database;    $journ_key = $database->escape_value($journ_key);    $sql  = "SELECT * FROM journals ";    $sql .= "WHERE journal_code = '{$journ_key}' ";    $sql .= "LIMIT 1";    $result_array = self::find_by_sql($sql);	return !empty($result_array) ? array_shift($result_array) : false;	}	public static function journal_err() {		global $database;		$sql  = "SELECT * FROM `journals` WHERE journal_code = '' OR title_abb = '' OR title = '' ";		$sql  .= " OR lang_code NOT IN (SELECT lang_code FROM lang_code) ORDER BY journal_code";		$result_array = self::find_by_sql($sql);		return !empty($result_array) ? $result_array : false;	}	}?>