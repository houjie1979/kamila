<?php// If it's going to need the database, then it's // probably smart to require it before we start.require_once(LIB_PATH.DS.'database.php');class Isotopes extends DatabaseObject {		protected static $table_name = "isotope_code";	protected static $db_fields = array('id', 'isotope_code', 'topic_abb', 				'subject_code', 'subject_flag', 'energy');		public $id;	public $isotope_code;	public $topic_abb;	public $subject_code;	public $subject_flag;	public $energy;	  public function code_name() {    if(isset($this->isotope_code) ) {      return $this->isotope_code . "   " . $this->topic_abb . "  E= " . $this->energy;    } else {      return "";    }  }public static function iso_sql_where($keycode, $keyname, $element){		$sql = "";		if($keycode !="") { $sql .=" AND isotope_code= '{$keycode}' "; }		if($keyname !="") { $sql .=" AND LOCATE('{$keyname}',topic_abb) ";}		if($element !="") { $sql .=" AND LOCATE('{$element}',subject_code) ";}	return $sql;	}public static function is_isotope($key) {	  global $database;//	$sanitizedkey = $database->escape_value($key);	$sql = "SELECT COUNT(*) FROM isotope_code WHERE isotope_code = '{$key}' ";	$result_set = $database->query($sql);	$row = $database->fetch_array($result_set);	return array_shift($row);	}	public function compose_isotope_list(){	$sql = "SELECT * FROM isotope_code WHERE 1 ORDER BY isotope_code";        return self::find_by_sql($sql);	}public function export_isotope_list($records){	$tb =chr(9);	$lf =chr(10);	$output = "";	foreach($records as $rec) {		$output .= $rec->isotope_code . $tb . $rec->topic_abb . $tb . $rec->energy . $lf;		}	return $output;} public function full_name() {    if(isset($this->isotope_code) ) {      return $this->isotope_code . "  " . $this->topic_abb . "  " . $this->subject_code . "  " . $this->energy;    } else {      return "";    }  }  public static function authenticate($isotope_code="") {    global $database;    $isotope_code = $database->escape_value($isotope_code);    $sql  = "SELECT * FROM isotope_code ";    $sql .= "WHERE isotope_code = '{$isotope_code}' ";    $sql .= "LIMIT 1";    $result_array = self::find_by_sql($sql);		return !empty($result_array) ? array_shift($result_array) : false;	}public static function isotope_err(){	global $database;	$select_sql = "SELECT COUNT(*) FROM isotope_code WHERE isotope_code = '' OR topic_abb ='' ";	$select_sql .= " OR subject_code = '' OR energy = '' OR subject_flag = '' ";	$result_set = $database->query($select_sql);	$rows = array_shift($database->fetch_array($result_set));	if(!empty($rows)) {	return $rows; } else return '0';	}}?>