<?php// If it's going to need the database, then it's // probably smart to require it before we start.require_once(LIB_PATH.DS.'database.php');class Abbreviations extends DatabaseObject {		protected static $table_name="abbreviations";	protected static $db_fields = array('id', 'medi_num', 'abbr_code', 'definition');		public $id;	public $medi_num;	public $abbr_code;	public $definition;	  public function code_name() {    if(isset($this->abbr_code) && isset($this->definition)) {      return $this->abbr_code .chr(9) . $this->definition; //chr(9)    } else {      return "";    }  }public static function abb_sql_where($abbcode, $abbname, $medi_num){		$sql = "";		if($abbcode !="") {$sql .=" AND abbr_code= '{$abbcode}' ";}		if($abbname !="") {$sql .=" AND LOCATE('{$abbname}', definition) ";}		if($medi_num !="") {$sql .=" AND medi_num= '{$medi_num}' ";}	return $sql;	}public static function abb_sql_or($abbcode, $abbname){		$sql = "";		if($abbcode != "") {			$sql .=" AND abbr_code= '{$abbcode}' ";			if($abbname !="") $sql .=" OR LOCATE('{$abbname}', definition) ";			}		else		if($abbname != "") {$sql .=" AND LOCATE('{$abbname}', definition) ";}	return $sql;	}public static function print_issue($medi){		$sql = "SELECT * FROM abbreviations WHERE medi_num = '{$medi}' OR medi_num = 'P' ORDER BY abbr_code";		return self::find_by_sql($sql);		}	public static function print_handbook(){		$sql = "SELECT * FROM abbreviations WHERE 1 ORDER BY abbr_code";		return self::find_by_sql($sql);		}	public function form_dupli_out(){	$out = $this->medi_num . chr(9) . $this->abbr_code . chr(9) . $this->definition . chr(10);	return $out;	} public static function authenticate($abb_code="") {		global $database;		$abb_code = $database->escape_value($abb_code);		$sql  = "SELECT * FROM abbreviations ";		$sql .= "WHERE abbr_code = '{$abb_code}' ";		$sql .= "LIMIT 1";		$result_array = self::find_by_sql($sql);		return !empty($result_array) ? array_shift($result_array) : false;	}public static function abbreviation_err() {		global $database;		$sql  = "SELECT * FROM `abbreviations` WHERE abbr_code ='' OR definition = '' ";		$sql  .= " OR medi_num = '' OR medi_num = '0' ORDER BY medi_num, abbr_code, definition ";		$result_array = self::find_by_sql($sql);		return !empty($result_array) ? $result_array : false;	}	}?>