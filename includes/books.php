<?php// If it's going to need the database, then it's // probably smart to require it before we start.require_once(LIB_PATH.DS.'database.php');class Books extends DatabaseObject {		protected static $table_name="books";	protected static $db_fields = array('id', 'book_code', 'lang_abb',					'publisher', 'publisher_address', 'year', 'title', 					'editors', 'translation_code', 'conference_name', 					'conference_place', 'conference_date', 'type_abb', 					'isbn_code', 'library_code');		public $id;	public $book_code;	public $lang_abb;	public $publisher;	public $publisher_address;	public $year;	public $title;	public $editors;	public $translation_code;	public $conference_name;	public $conference_place;	public $conference_date;	public $type_abb;	public $isbn_code;	public $library_code;	  public function full_name() {    if(isset($this->book_code) ) {      return $this->book_code . " " . $this->lang_abb. " " . $this->publisher. " " . 	  $this->year. " " . $this->title. " " . $this->editors. " " . 	  $this->conference_name. " " . $this->conference_place. " " . $this->isbn_code;    } else {      return "";    }  }public static function books_sql_where($bookcode, $author){						$sql = "";		if($bookcode !="") {$sql .=" AND book_code= '{$bookcode}' "; }		if($author !="") {$sql .=" AND LOCATE('{$author}',editors) ";}	return $sql;	}	public static function is_keyword($key) {	  global $database;	$sql = "SELECT COUNT(*) FROM keywords WHERE keyword_code = '{$key}'";	$result_set = $database->query($sql);	$row = $database->fetch_array($result_set);	echo $key." ".array_shift($row);	return array_shift($row);	}public static function authenticate($journ_key="") {    global $database;    $journ_key = $database->escape_value($journ_key);    $sql  = "SELECT * FROM books ";    $sql .= "WHERE book_code = '{$journ_key}' ";    $sql .= "LIMIT 1";    $result_array = self::find_by_sql($sql);	return !empty($result_array) ? array_shift($result_array) : false;	}public static function book_err() {		global $database;		$sql  = "SELECT * FROM `books` WHERE book_code = '' OR year = '' OR title = '' ";		$sql  .= " OR lang_abb NOT IN (SELECT lang_code FROM lang_code)  ";		$result_array = self::find_by_sql($sql);		return !empty($result_array) ? $result_array : false;	}	}?>